<div class="card cotizar-card">
  <h3>Cotizar envío</h3>
  
  <!-- Skeleton Loading -->
  <div *ngIf="isLoading" class="skeleton-cotizar">
    <div class="skeleton-form">
      <!-- Skeleton para Origen -->
      <div class="skeleton-field">
        <div class="skeleton-label"></div>
        <div class="skeleton-input-segment">
          <div class="skeleton-select"></div>
          <div class="skeleton-input"></div>
        </div>
      </div>
      
      <!-- Skeleton para Destino -->
      <div class="skeleton-field">
        <div class="skeleton-label"></div>
        <div class="skeleton-input-segment">
          <div class="skeleton-select"></div>
          <div class="skeleton-input"></div>
        </div>
      </div>
      
      <!-- Skeleton para Tipo de empaque -->
      <div class="skeleton-field">
        <div class="skeleton-label"></div>
        <div class="skeleton-full-input"></div>
      </div>
      
      <!-- Skeleton para Tipo de producto -->
      <div class="skeleton-field">
        <div class="skeleton-label"></div>
        <div class="skeleton-full-input"></div>
      </div>
      
      <!-- Skeleton para Dimensiones -->
      <div class="skeleton-field">
        <div class="skeleton-dimensiones">
          <div class="skeleton-dim-box"></div>
          <div class="skeleton-dim-box"></div>
          <div class="skeleton-dim-box"></div>
          <div class="skeleton-dim-box"></div>
        </div>
        <div class="skeleton-peso-volumetrico"></div>
      </div>
      
      <!-- Skeleton para botón -->
      <div class="skeleton-button"></div>
    </div>
  </div>
  
  <!-- Formulario real -->
  <form *ngIf="!isLoading" (ngSubmit)="onCotizar()" style="gap: 22px; display: grid;">
    
    <div>
      <label class="field-label">Origen</label>
      <div class="input-segment">
        <div class="custom-select">
          <div
            class="selected"
            [class.open]="showMenuOrigen"
            (click)="showMenuOrigen = !showMenuOrigen"
          >
            <img
              [src]="getFlag(paisOrigen.name)"
              alt="Bandera {{ paisOrigen }}"
              class="flag-icon"
            />
            <span class="arrow"></span>
          </div>
        
          <div class="options" *ngIf="showMenuOrigen">
            <div
              class="option"
              *ngFor="let c of countries"
              (click)="seleccionarPaisOrigen(c)"
            >
              <img [src]="c.flag" class="flag-icon" />
              {{ c.name }}
            </div>
          </div>
        </div>
        <input type="text" class="segment-right" [(ngModel)]="cpOrigen" name="cpOrigen" placeholder="Ciudad / CP"/>
      </div>
    </div>

    <div>
      <label class="field-label">Destino</label>
      <div class="input-segment">
        <div class="custom-select">
          <div
            class="selected"
            [class.open]="showMenuDestino"
            (click)="showMenuDestino = !showMenuDestino"
          >
            <img
              [src]="getFlag(paisDestino.name)"
              alt="Bandera {{ paisOrigen }}"
              class="flag-icon"
            />
            <span class="arrow"></span>
          </div>
        
          <div class="options" *ngIf="showMenuDestino">
            <div
              class="option"
              *ngFor="let c of countries"
              (click)="seleccionarPaisDestino(c)"
            >
              <img [src]="c.flag" class="flag-icon" />
              {{ c.name }}
            </div>
          </div>
        </div>

        <input type="text" class="segment-right" [(ngModel)]="cpDestino" name="cpDestino" placeholder="Ciudad / CP"/>
      </div>
    </div>



    <div>

      <div class="dimensiones">
        <div class="dim-box"><input type="number" [(ngModel)]="largo" name="largo" placeholder="Largo"/></div>
        <div class="dim-box"><input type="number" [(ngModel)]="ancho" name="ancho" placeholder="Ancho"/></div>
        <div class="dim-box"><input type="number" [(ngModel)]="alto" name="alto" placeholder="Alto"/></div>
        <div class="dim-box"><input type="number" [(ngModel)]="pesoReal" name="pesoReal" placeholder="Peso"/></div>
      </div>

      <div>

        <div class="peso-volumetrico">
          <strong>Peso volumétrico:</strong>
          {{ pesoVolumetrico | number:'1.2-2' }} kg
        </div>

      </div>

    </div>




 
    <button type="submit" class="btn-cotizar">Cotizar</button>
  </form>
</div>